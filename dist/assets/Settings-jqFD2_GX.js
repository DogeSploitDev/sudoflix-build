import{ao as Ws,ap as Jt,r as f,j as a,a as De,G as Z,K as On,H as Ys,I as wr,n as Cr,A as qs,ad as Vs,aq as pe,D as ht}from"./vendor-CRD5yWxp.js";import{G as Nn,H as kt,r as we,J as Js,u as jr,K as Qs,O as tn,Q as Mn,B as Le,R as Sr,U as Nr,V as Zs,W as Dr,X as tr,Y as ei,Z as Ar,I as Ye,a as le,_ as Ln,$ as _t,a0 as vn,a1 as nr,a2 as Rt,a3 as ti,a4 as ni,a5 as Er,a6 as ri,a7 as Tr,a8 as kn,a9 as Rr,aa as Dn,L as si,ab as ii,ac as Ir,ad as ai,m as oi,ae as ci,af as rr,ag as li,ah as di,ai as ui,aj as Or,c as fi,ak as gi,al as hi,am as sr,an as ir,ao as ar,ap as gt,aq as pi,ar as mi,as as bi,at as vi,au as xi,av as yi,aw as wi}from"./index-bxoUcoqi.js";var nn={exports:{}};nn.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,l=9007199254740991,d="[object Arguments]",u="[object Array]",g="[object AsyncFunction]",m="[object Boolean]",h="[object Date]",x="[object Error]",b="[object Function]",E="[object GeneratorFunction]",C="[object Map]",S="[object Number]",D="[object Null]",N="[object Object]",j="[object Promise]",T="[object Proxy]",I="[object RegExp]",O="[object Set]",A="[object String]",M="[object Symbol]",B="[object Undefined]",v="[object WeakMap]",P="[object ArrayBuffer]",K="[object DataView]",ee="[object Float32Array]",y="[object Float64Array]",F="[object Int8Array]",U="[object Int16Array]",W="[object Int32Array]",Pe="[object Uint8Array]",X="[object Uint8ClampedArray]",$e="[object Uint16Array]",qe="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,k={};k[ee]=k[y]=k[F]=k[U]=k[W]=k[Pe]=k[X]=k[$e]=k[qe]=!0,k[d]=k[u]=k[P]=k[m]=k[K]=k[h]=k[x]=k[b]=k[C]=k[S]=k[N]=k[I]=k[O]=k[A]=k[v]=!1;var te=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,He=typeof self=="object"&&self&&self.Object===Object&&self,G=te||He||Function("return this")(),ue=t&&!t.nodeType&&t,_=ue&&!0&&e&&!e.nodeType&&e,Ee=_&&_.exports===ue,se=Ee&&te.process,Te=function(){try{return se&&se.binding&&se.binding("util")}catch{}}(),fe=Te&&Te.isTypedArray;function Re(s,c){for(var p=-1,w=s==null?0:s.length,z=0,R=[];++p<w;){var H=s[p];c(H,p,s)&&(R[z++]=H)}return R}function Be(s,c){for(var p=-1,w=c.length,z=s.length;++p<w;)s[z+p]=c[p];return s}function xt(s,c){for(var p=-1,w=s==null?0:s.length;++p<w;)if(c(s[p],p,s))return!0;return!1}function ot(s,c){for(var p=-1,w=Array(s);++p<s;)w[p]=c(p);return w}function yt(s){return function(c){return s(c)}}function Ue(s,c){return s.has(c)}function ct(s,c){return s==null?void 0:s[c]}function lt(s){var c=-1,p=Array(s.size);return s.forEach(function(w,z){p[++c]=[z,w]}),p}function zt(s,c){return function(p){return s(c(p))}}function Ft(s){var c=-1,p=Array(s.size);return s.forEach(function(w){p[++c]=w}),p}var gn=Array.prototype,hn=Function.prototype,Ie=Object.prototype,ze=G["__core-js_shared__"],Ve=hn.toString,be=Ie.hasOwnProperty,Oe=function(){var s=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),wt=Ie.toString,pn=RegExp("^"+Ve.call(be).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=Ee?G.Buffer:void 0,tt=G.Symbol,Ht=G.Uint8Array,Ct=Ie.propertyIsEnumerable,mn=gn.splice,Ke=tt?tt.toStringTag:void 0,Kt=Object.getOwnPropertySymbols,Y=$t?$t.isBuffer:void 0,oe=zt(Object.keys,Object),ne=ft(G,"DataView"),ge=ft(G,"Map"),ie=ft(G,"Promise"),ce=ft(G,"Set"),he=ft(G,"WeakMap"),Ce=ft(Object,"create"),ve=it(ne),nt=it(ge),rt=it(ie),dt=it(ce),ut=it(he),jt=tt?tt.prototype:void 0,Xe=jt?jt.valueOf:void 0;function xe(s){var c=-1,p=s==null?0:s.length;for(this.clear();++c<p;){var w=s[c];this.set(w[0],w[1])}}function St(){this.__data__=Ce?Ce(null):{},this.size=0}function is(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function as(s){var c=this.__data__;if(Ce){var p=c[s];return p===r?void 0:p}return be.call(c,s)?c[s]:void 0}function os(s){var c=this.__data__;return Ce?c[s]!==void 0:be.call(c,s)}function cs(s,c){var p=this.__data__;return this.size+=this.has(s)?0:1,p[s]=Ce&&c===void 0?r:c,this}xe.prototype.clear=St,xe.prototype.delete=is,xe.prototype.get=as,xe.prototype.has=os,xe.prototype.set=cs;function Ge(s){var c=-1,p=s==null?0:s.length;for(this.clear();++c<p;){var w=s[c];this.set(w[0],w[1])}}function ls(){this.__data__=[],this.size=0}function ds(s){var c=this.__data__,p=Gt(c,s);if(p<0)return!1;var w=c.length-1;return p==w?c.pop():mn.call(c,p,1),--this.size,!0}function us(s){var c=this.__data__,p=Gt(c,s);return p<0?void 0:c[p][1]}function fs(s){return Gt(this.__data__,s)>-1}function gs(s,c){var p=this.__data__,w=Gt(p,s);return w<0?(++this.size,p.push([s,c])):p[w][1]=c,this}Ge.prototype.clear=ls,Ge.prototype.delete=ds,Ge.prototype.get=us,Ge.prototype.has=fs,Ge.prototype.set=gs;function st(s){var c=-1,p=s==null?0:s.length;for(this.clear();++c<p;){var w=s[c];this.set(w[0],w[1])}}function hs(){this.size=0,this.__data__={hash:new xe,map:new(ge||Ge),string:new xe}}function ps(s){var c=Wt(this,s).delete(s);return this.size-=c?1:0,c}function ms(s){return Wt(this,s).get(s)}function bs(s){return Wt(this,s).has(s)}function vs(s,c){var p=Wt(this,s),w=p.size;return p.set(s,c),this.size+=p.size==w?0:1,this}st.prototype.clear=hs,st.prototype.delete=ps,st.prototype.get=ms,st.prototype.has=bs,st.prototype.set=vs;function Xt(s){var c=-1,p=s==null?0:s.length;for(this.__data__=new st;++c<p;)this.add(s[c])}function xs(s){return this.__data__.set(s,r),this}function ys(s){return this.__data__.has(s)}Xt.prototype.add=Xt.prototype.push=xs,Xt.prototype.has=ys;function Je(s){var c=this.__data__=new Ge(s);this.size=c.size}function ws(){this.__data__=new Ge,this.size=0}function Cs(s){var c=this.__data__,p=c.delete(s);return this.size=c.size,p}function js(s){return this.__data__.get(s)}function Ss(s){return this.__data__.has(s)}function Ns(s,c){var p=this.__data__;if(p instanceof Ge){var w=p.__data__;if(!ge||w.length<n-1)return w.push([s,c]),this.size=++p.size,this;p=this.__data__=new st(w)}return p.set(s,c),this.size=p.size,this}Je.prototype.clear=ws,Je.prototype.delete=Cs,Je.prototype.get=js,Je.prototype.has=Ss,Je.prototype.set=Ns;function Ds(s,c){var p=Yt(s),w=!p&&Fs(s),z=!p&&!w&&bn(s),R=!p&&!w&&!z&&Zn(s),H=p||w||z||R,J=H?ot(s.length,String):[],re=J.length;for(var $ in s)be.call(s,$)&&!(H&&($=="length"||z&&($=="offset"||$=="parent")||R&&($=="buffer"||$=="byteLength"||$=="byteOffset")||_s($,re)))&&J.push($);return J}function Gt(s,c){for(var p=s.length;p--;)if(qn(s[p][0],c))return p;return-1}function As(s,c,p){var w=c(s);return Yt(s)?w:Be(w,p(s))}function Nt(s){return s==null?s===void 0?B:D:Ke&&Ke in Object(s)?Ls(s):zs(s)}function Xn(s){return Dt(s)&&Nt(s)==d}function Gn(s,c,p,w,z){return s===c?!0:s==null||c==null||!Dt(s)&&!Dt(c)?s!==s&&c!==c:Es(s,c,p,w,Gn,z)}function Es(s,c,p,w,z,R){var H=Yt(s),J=Yt(c),re=H?u:Qe(s),$=J?u:Qe(c);re=re==d?N:re,$=$==d?N:$;var ye=re==N,Me=$==N,ae=re==$;if(ae&&bn(s)){if(!bn(c))return!1;H=!0,ye=!1}if(ae&&!ye)return R||(R=new Je),H||Zn(s)?Wn(s,c,p,w,z,R):Os(s,c,re,p,w,z,R);if(!(p&i)){var je=ye&&be.call(s,"__wrapped__"),Se=Me&&be.call(c,"__wrapped__");if(je||Se){var Ze=je?s.value():s,We=Se?c.value():c;return R||(R=new Je),z(Ze,We,p,w,R)}}return ae?(R||(R=new Je),Ms(s,c,p,w,z,R)):!1}function Ts(s){if(!Qn(s)||Bs(s))return!1;var c=Vn(s)?pn:de;return c.test(it(s))}function Rs(s){return Dt(s)&&Jn(s.length)&&!!k[Nt(s)]}function Is(s){if(!Us(s))return oe(s);var c=[];for(var p in Object(s))be.call(s,p)&&p!="constructor"&&c.push(p);return c}function Wn(s,c,p,w,z,R){var H=p&i,J=s.length,re=c.length;if(J!=re&&!(H&&re>J))return!1;var $=R.get(s);if($&&R.get(c))return $==c;var ye=-1,Me=!0,ae=p&o?new Xt:void 0;for(R.set(s,c),R.set(c,s);++ye<J;){var je=s[ye],Se=c[ye];if(w)var Ze=H?w(Se,je,ye,c,s,R):w(je,Se,ye,s,c,R);if(Ze!==void 0){if(Ze)continue;Me=!1;break}if(ae){if(!xt(c,function(We,at){if(!Ue(ae,at)&&(je===We||z(je,We,p,w,R)))return ae.push(at)})){Me=!1;break}}else if(!(je===Se||z(je,Se,p,w,R))){Me=!1;break}}return R.delete(s),R.delete(c),Me}function Os(s,c,p,w,z,R,H){switch(p){case K:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case P:return!(s.byteLength!=c.byteLength||!R(new Ht(s),new Ht(c)));case m:case h:case S:return qn(+s,+c);case x:return s.name==c.name&&s.message==c.message;case I:case A:return s==c+"";case C:var J=lt;case O:var re=w&i;if(J||(J=Ft),s.size!=c.size&&!re)return!1;var $=H.get(s);if($)return $==c;w|=o,H.set(s,c);var ye=Wn(J(s),J(c),w,z,R,H);return H.delete(s),ye;case M:if(Xe)return Xe.call(s)==Xe.call(c)}return!1}function Ms(s,c,p,w,z,R){var H=p&i,J=Yn(s),re=J.length,$=Yn(c),ye=$.length;if(re!=ye&&!H)return!1;for(var Me=re;Me--;){var ae=J[Me];if(!(H?ae in c:be.call(c,ae)))return!1}var je=R.get(s);if(je&&R.get(c))return je==c;var Se=!0;R.set(s,c),R.set(c,s);for(var Ze=H;++Me<re;){ae=J[Me];var We=s[ae],at=c[ae];if(w)var er=H?w(at,We,ae,c,s,R):w(We,at,ae,s,c,R);if(!(er===void 0?We===at||z(We,at,p,w,R):er)){Se=!1;break}Ze||(Ze=ae=="constructor")}if(Se&&!Ze){var qt=s.constructor,Vt=c.constructor;qt!=Vt&&"constructor"in s&&"constructor"in c&&!(typeof qt=="function"&&qt instanceof qt&&typeof Vt=="function"&&Vt instanceof Vt)&&(Se=!1)}return R.delete(s),R.delete(c),Se}function Yn(s){return As(s,Ks,ks)}function Wt(s,c){var p=s.__data__;return Ps(c)?p[typeof c=="string"?"string":"hash"]:p.map}function ft(s,c){var p=ct(s,c);return Ts(p)?p:void 0}function Ls(s){var c=be.call(s,Ke),p=s[Ke];try{s[Ke]=void 0;var w=!0}catch{}var z=wt.call(s);return w&&(c?s[Ke]=p:delete s[Ke]),z}var ks=Kt?function(s){return s==null?[]:(s=Object(s),Re(Kt(s),function(c){return Ct.call(s,c)}))}:Xs,Qe=Nt;(ne&&Qe(new ne(new ArrayBuffer(1)))!=K||ge&&Qe(new ge)!=C||ie&&Qe(ie.resolve())!=j||ce&&Qe(new ce)!=O||he&&Qe(new he)!=v)&&(Qe=function(s){var c=Nt(s),p=c==N?s.constructor:void 0,w=p?it(p):"";if(w)switch(w){case ve:return K;case nt:return C;case rt:return j;case dt:return O;case ut:return v}return c});function _s(s,c){return c=c??l,!!c&&(typeof s=="number"||Ae.test(s))&&s>-1&&s%1==0&&s<c}function Ps(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Bs(s){return!!Oe&&Oe in s}function Us(s){var c=s&&s.constructor,p=typeof c=="function"&&c.prototype||Ie;return s===p}function zs(s){return wt.call(s)}function it(s){if(s!=null){try{return Ve.call(s)}catch{}try{return s+""}catch{}}return""}function qn(s,c){return s===c||s!==s&&c!==c}var Fs=Xn(function(){return arguments}())?Xn:function(s){return Dt(s)&&be.call(s,"callee")&&!Ct.call(s,"callee")},Yt=Array.isArray;function $s(s){return s!=null&&Jn(s.length)&&!Vn(s)}var bn=Y||Gs;function Hs(s,c){return Gn(s,c)}function Vn(s){if(!Qn(s))return!1;var c=Nt(s);return c==b||c==E||c==g||c==T}function Jn(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=l}function Qn(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function Dt(s){return s!=null&&typeof s=="object"}var Zn=fe?yt(fe):Rs;function Ks(s){return $s(s)?Ds(s):Is(s)}function Xs(){return[]}function Gs(){return!1}e.exports=Hs})(nn,nn.exports);var Ci=nn.exports;const ji=Ws(Ci);function Fe(e){const[t,n]=f.useState(void 0);f.useEffect(()=>{n(void 0)},[e]);const r=f.useMemo(()=>!ji(t,e)&&t!==void 0,[t,e]),i=f.useCallback(d=>{d instanceof Function?n(u=>d(u!==void 0?u:e)):n(d)},[e,n]),o=t===void 0?e:t,l=f.useCallback(()=>n(void 0),[n]);return[o,i,l,r]}function Si(e,t,n,r,i,o,l,d,u,g){const[m,h,x,b]=Fe(i),[E,C,S,D]=Fe(o),[N,j,T,I]=Fe(e),O=Nn(ot=>ot.setPreviewTheme),A=f.useCallback(()=>O(e),[O,e]),[M,B,v,P]=Fe(t),[K,ee,y,F]=Fe(n),[U,W,Pe,X]=Fe(r),[$e,qe,V,de]=Fe(l),[Ae,k,te,He]=Fe(d),[G,ue,_,Ee]=Fe(u),[se,Te,fe,Re]=Fe(g);function Be(){T(),A(),v(),y(),x(),S(),Pe(),V(),te(),_(),fe()}return{reset:Be,changed:I||P||F||X||D||b||de||He||Ee||Re,theme:{state:N,set:j,changed:I},appLanguage:{state:M,set:B,changed:P},subtitleStyling:{state:K,set:ee,changed:F},deviceName:{state:U,set:W,changed:X},proxyUrls:{state:m,set:h,changed:b},backendUrl:{state:E,set:C,changed:D},profile:{state:$e,set:qe,changed:de},enableThumbnails:{state:Ae,set:k,changed:He},enableAutoplay:{state:G,set:ue,changed:Ee},sourceOrder:{state:se,set:Te,changed:Re}}}function cn(e){return a.jsx("div",{className:De("w-full rounded-lg bg-settings-card-background bg-opacity-[0.15] border border-settings-card-border",e.paddingClass??"px-8 py-6",e.className),children:e.children})}function _n(e){return a.jsx("div",{className:De("w-full rounded-lg bg-settings-card-altBackground bg-opacity-50",e.paddingClass??"px-8 py-6",e.className),children:e.children})}function Ni(){const{t:e}=Z(),t=kt(),n=we(d=>d.account),{logout:r}=Js(),i=jr("account-delete"),[o,l]=On(async()=>{!n||!t||(await Qs(t,n),await r(),i.hide())},[r,n,t,i.hide]);return n?a.jsxs("div",{children:[a.jsx(tn,{border:!0,children:e("settings.account.actions.title")}),a.jsxs(_n,{paddingClass:"px-6 py-12",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[a.jsxs("div",{children:[a.jsx(Mn,{children:e("settings.account.actions.delete.title")}),a.jsx("p",{className:"text-type-text",children:e("settings.account.actions.delete.text")})]}),a.jsx("div",{className:"flex justify-start lg:justify-end items-center",children:a.jsx(Le,{theme:"danger",loading:o.loading,onClick:i.show,children:e("settings.account.actions.delete.button")})})]}),a.jsx(Sr,{id:i.id,children:a.jsxs(Nr,{children:[a.jsx(tn,{className:"!mt-0",children:e("settings.account.actions.delete.confirmTitle")}),a.jsx(Zs,{children:e("settings.account.actions.delete.confirmDescription")}),a.jsx(Le,{theme:"danger",loading:o.loading,onClick:l,children:e("settings.account.actions.delete.confirmButton")})]})})]}):null}function Di(e){const{t}=Z();return a.jsx(Sr,{id:e.id,children:a.jsxs(Nr,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-9",children:[a.jsx(tn,{className:"!mt-0 !mb-0",children:t("settings.account.profile.title")}),a.jsx(Dr,{profile:{colorA:e.colorA,colorB:e.colorB,icon:e.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(tr,{label:t("settings.account.profile.firstColor"),value:e.colorA,onInput:e.setColorA}),a.jsx(tr,{label:t("settings.account.profile.secondColor"),value:e.colorB,onInput:e.setColorB}),a.jsx(ei,{label:t("settings.account.profile.userIcon"),value:e.userIcon,onInput:e.setUserIcon})]}),a.jsx("div",{className:"flex justify-center mt-8",children:a.jsx(Le,{theme:"purple",className:"!px-20",onClick:e.close,children:t("settings.account.profile.finish")})})]})})}function Ai(e){const{t}=Z(),{logout:n}=Ar(),r=jr("profile-edit");return a.jsxs(cn,{paddingClass:"px-8 py-10",className:"!mt-8",children:[a.jsx(Di,{id:r.id,close:r.hide,colorA:e.colorA,setColorA:e.setColorA,colorB:e.colorB,setColorB:e.setColorB,userIcon:e.userIcon,setUserIcon:e.setUserIcon}),a.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[a.jsx("div",{children:a.jsx(Dr,{profile:{colorA:e.colorA,colorB:e.colorB,icon:e.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:a.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:r.show,children:[a.jsx(Ye,{icon:le.EDIT}),t("settings.account.accountDetails.editProfile")]})})}),a.jsx("div",{children:a.jsxs("div",{className:"space-y-8 max-w-xs",children:[a.jsx(Ln,{label:t("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:t("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:e.deviceName,onChange:i=>e.setDeviceName(i)}),a.jsx("div",{className:"flex space-x-3",children:a.jsx(Le,{theme:"danger",onClick:n,children:t("settings.account.accountDetails.logoutButton")})})]})})]})]})}function or(e){const{t}=Z();return a.jsxs("div",{className:De({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!e.fullscreen,"fixed inset-0 z-[60]":e.fullscreen}),children:[e.fullscreen&&e.show?a.jsx(Ys,{children:a.jsx("html",{"data-no-scroll":!0})}):null,a.jsx(Er,{animation:"fade",show:e.show,children:a.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[a.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:e.onToggle,children:a.jsx(Ye,{icon:e.fullscreen?le.X:le.EXPAND})}),a.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] bottom-0 p-4",children:a.jsx("div",{className:e.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:a.jsx(ri,{text:t("settings.subtitles.previewQuote")??void 0,styling:e.styling,overrideCasing:!1})})})]})})]})}function Ei(e){const{t}=Z(),[n,r]=f.useState(!1);return a.jsxs("div",{children:[a.jsx(_t,{border:!0,children:t("settings.subtitles.title")}),a.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(vn,{label:t("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:i=>e.setStyling({...e.styling,backgroundOpacity:i/100}),value:e.styling.backgroundOpacity*100,textTransformer:i=>`${i}%`}),a.jsx(vn,{label:t("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:i=>e.setStyling({...e.styling,backgroundBlur:i/100}),value:e.styling.backgroundBlur*100,textTransformer:i=>`${i}%`}),a.jsx(vn,{label:t("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:i=>`${i}%`,onChange:i=>e.setStyling({...e.styling,size:i/100}),value:e.styling.size*100}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(nr.FieldTitle,{children:t("settings.subtitles.textBoldLabel")}),a.jsx("div",{className:"flex justify-center items-center",children:a.jsx(Rt,{enabled:e.styling.bold,onClick:()=>e.setStyling({...e.styling,bold:!e.styling.bold})})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(nr.FieldTitle,{children:t("settings.subtitles.colorLabel")}),a.jsx("div",{className:"flex justify-center items-center",children:ti.map(i=>a.jsx(ni,{onClick:()=>e.setStyling({...e.styling,color:i}),color:i,active:e.styling.color===i},i))})]})]}),a.jsx(or,{show:!0,styling:e.styling,onToggle:()=>r(i=>!i)}),a.jsx(or,{show:n,fullscreen:!0,styling:e.styling,onToggle:()=>r(i=>!i)})]})]})}function Ti(e){let{proxyUrls:t,setProxyUrls:n}=e;const{t:r}=Z(),i=f.useCallback(()=>{n(d=>[...d??[],""])},[n]),o=f.useCallback((d,u)=>{n(g=>[...(g??[]).map((m,h)=>h!==d?m:u)])},[n]),l=f.useCallback(d=>{n(u=>[...(u??[]).filter((g,m)=>m!==d)])},[n]);return a.jsxs(cn,{children:[a.jsxs("div",{className:"flex justify-between items-center gap-4",children:[a.jsxs("div",{className:"my-3",children:[a.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.workers.label")}),a.jsx("p",{className:"max-w-[20rem] font-medium",children:a.jsx(wr,{i18nKey:"settings.connections.workers.description",children:a.jsx(Tr,{to:"https://docs.undi.rest/proxy/deploy",children:"Proxy documentation"})})})]}),a.jsx("div",{children:a.jsx(Rt,{onClick:()=>n(d=>d===null?[]:null),enabled:t!==null})})]}),t!==null?a.jsxs(a.Fragment,{children:[a.jsx(kn,{marginClass:"my-6 px-8 box-content -mx-8"}),a.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.workers.urlLabel")}),a.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((t==null?void 0:t.length)??0)===0?a.jsx("p",{children:r("settings.connections.workers.emptyState")}):null,(t??[]).map((d,u)=>a.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[a.jsx(Ln,{value:d,onChange:g=>o(u,g),placeholder:r("settings.connections.workers.urlPlaceholder")??void 0}),a.jsx("button",{type:"button",onClick:()=>l(u),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:a.jsx(Ye,{className:"text-xl",icon:le.X})})]},u))]}),a.jsx(Le,{theme:"purple",onClick:i,children:r("settings.connections.workers.addButton")})]}):null]})}function Ri(e){let{backendUrl:t,setBackendUrl:n}=e;const{t:r}=Z();return a.jsxs(cn,{children:[a.jsxs("div",{className:"flex justify-between items-center gap-4",children:[a.jsxs("div",{className:"my-3",children:[a.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.server.label")}),a.jsx("p",{className:"max-w-[20rem] font-medium",children:a.jsx(wr,{i18nKey:"settings.connections.server.description",children:a.jsx(Tr,{to:"https://docs.undi.rest/backend/deploy",children:"Backend documentation"})})})]}),a.jsx("div",{children:a.jsx(Rt,{onClick:()=>n(i=>i===null?"":null),enabled:t!==null})})]}),t!==null?a.jsxs(a.Fragment,{children:[a.jsx(kn,{marginClass:"my-6 px-8 box-content -mx-8"}),a.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.server.urlLabel")}),a.jsx(Ln,{onChange:n,value:t??""})]}):null]})}function Ii(e){const{t}=Z();return a.jsxs("div",{children:[a.jsx(_t,{border:!0,children:t("settings.connections.title")}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ti,{proxyUrls:e.proxyUrls,setProxyUrls:e.setProxyUrls}),a.jsx(Ri,{backendUrl:e.backendUrl,setBackendUrl:e.setBackendUrl})]})]})}function Oi(e){return a.jsx("p",{className:"text-type-text",children:e.children})}function Mi(e){const{t}=Z(),n=kt(),r=we(l=>{var d;return(d=l.account)==null?void 0:d.token}),[i,o]=On(async()=>{var l;if(!r)throw new Error("No token present");if(!n)throw new Error("No backend set");await ii(n,r,e.id),(l=e.onRemove)==null||l.call(e)},[n,r,e.id]);return a.jsxs(cn,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[a.jsxs("div",{className:"font-medium",children:[a.jsx(Oi,{children:t("settings.account.devices.deviceNameLabel")}),a.jsx("p",{className:"text-white",children:e.name})]}),e.isCurrent?null:a.jsx(Le,{theme:"danger",loading:i.loading,onClick:o,children:t("settings.account.devices.removeDevice")})]})}function Li(e){const{t}=Z(),n=we(l=>{var d;return(d=l.account)==null?void 0:d.seed}),r=e.sessions,i=we(l=>{var d;return(d=l.account)==null?void 0:d.sessionId}),o=f.useMemo(()=>{if(!n)return[];let l=r.map(d=>{const u=Rr(d.device,Dn(n));return{current:d.id===i,id:d.id,name:u}});return l=l.sort((d,u)=>d.current?-1:u.current?1:d.name.localeCompare(u.name)),l},[n,r,i]);return n?a.jsxs("div",{children:[a.jsx(tn,{border:!0,className:"mt-0 mb-9",children:t("settings.account.devices.title")}),e.error?a.jsx("p",{children:t("settings.account.devices.failed")}):e.loading?a.jsx(si,{}):a.jsx("div",{className:"space-y-5",children:o.map(l=>a.jsx(Mi,{name:l.name,id:l.id,isCurrent:l.current,onRemove:e.onChange},l.id))})]}):null}function ki(){const e=Cr(),{t}=Z();return a.jsx("div",{children:a.jsxs(_n,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[a.jsxs("div",{children:[a.jsx(Mn,{children:t("settings.account.register.title")}),a.jsx("p",{className:"text-type-text",children:t("settings.account.register.text")})]}),a.jsx("div",{className:"flex justify-end items-center",children:a.jsx(Le,{theme:"purple",onClick:()=>e("/register"),children:t("settings.account.register.cta")})})]})})}function cr(e){return a.jsxs("section",{className:e.className??"",children:[a.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:e.title}),e.children]})}function _i(e){return a.jsxs("button",{type:"button",onClick:e.onClick,className:De("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",e.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[a.jsx(Ye,{className:De("text-2xl text-settings-sidebar-type-icon",e.active?"text-settings-sidebar-type-iconActivated":null),icon:e.icon}),a.jsx("span",{children:e.children})]})}const Pi=16;function Bi(e){const{t}=Z(),n=e.url?e.url.startsWith("https://"):!1;return a.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[a.jsx(Ye,{icon:n?le.LOCK:le.UNLOCK}),t(n?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function Ui(){var m;const{t:e}=Z(),{isMobile:t}=Ir(),{account:n}=we(),r=location.hostname,[i,o]=f.useState(""),l=[{textKey:"settings.account.title",id:"settings-account",icon:le.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:le.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:le.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:le.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:le.LINK}],d=kt(),u=qs(async()=>{if(d)return ai(d)},[d]);f.useEffect(()=>{function h(){var C;const b=(window.innerHeight||document.documentElement.clientHeight)/4,E=l.map(S=>{const D=document.getElementById(S.id);if(!D)return{distance:1/0,link:S.id};const N=D.getBoundingClientRect(),j=Math.abs(b-N.top),T=Math.abs(b-N.bottom);return{distance:Math.min(T,j),link:S.id}}).sort((S,D)=>S.distance-D.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?o(l[l.length-1].id):o(((C=E[0])==null?void 0:C.link)??"")}return document.addEventListener("scroll",h),h(),()=>{document.removeEventListener("scroll",h)}});const g=f.useCallback(h=>{const x=document.getElementById(h);if(!x)return null;const b=x.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:b-120,behavior:"smooth"})},[]);return a.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:a.jsxs(Vs,{topOffset:-6*Pi,stickyClassName:"pt-[6rem]",disabled:t,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[a.jsxs("div",{className:"hidden lg:block",children:[a.jsx(cr,{title:e("global.pages.settings"),children:l.map(h=>a.jsx(_i,{icon:h.icon,active:h.id===i,onClick:()=>g(h.id),children:e(h.textKey)},h.id))}),a.jsx(kn,{})]}),a.jsx(cr,{className:"text-sm",title:e("settings.sidebar.info.title"),children:a.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.hostname")}),a.jsx("p",{className:"text-white",children:r})]}),a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[a.jsx("p",{children:e("settings.sidebar.info.backendUrl")}),a.jsx(Bi,{url:d})]}),a.jsx("p",{className:"text-white",children:(d==null?void 0:d.replace(/https?:\/\//,""))??"—"})]}),a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.userId")}),a.jsx("p",{className:"text-white",children:(n==null?void 0:n.userId)??e("settings.sidebar.info.notLoggedIn")})]}),a.jsxs("div",{className:"col-span-1 space-y-1",children:[a.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.appVersion")}),a.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:oi().APP_VERSION})]}),a.jsxs("div",{className:"col-span-1 space-y-1",children:[a.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.backendVersion")}),a.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[u.error?a.jsx(Ye,{icon:le.WARNING,className:"text-type-danger text-base"}):null,u.loading?a.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((m=u==null?void 0:u.value)==null?void 0:m.version)||e("settings.sidebar.info.unknownVersion")]})]})]})})]})})}const zi=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"blue",selector:"theme-blue",key:"settings.appearance.themes.blue"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"},{id:"blck",selector:"theme-blck",key:"settings.appearance.themes.blck"}],Fi=function(t){const{t:n}=Z();return a.jsxs("div",{className:De(t.selector,"cursor-pointer group tabbable"),onClick:t.onClick,children:[a.jsxs("div",{tabIndex:0,onKeyUp:r=>r.key==="Enter"&&r.currentTarget.click(),className:De("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",t.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[a.jsxs("div",{className:"absolute top-2 left-2",children:[a.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),a.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),a.jsx(Ye,{icon:le.CHECKMARK,className:De("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",t.active?"opacity-100":"opacity-0")}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:a.jsxs("div",{className:"relative w-full h-full",children:[a.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),a.jsxs("div",{className:"p-2 flex justify-between items-center",children:[a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),a.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),a.jsxs("div",{className:"mt-5 px-3",children:[a.jsxs("div",{className:"flex gap-1 items-center",children:[a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),a.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),a.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),a.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-white",children:t.name}),a.jsx("span",{className:De("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",t.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:n("settings.appearance.activeTheme")})]})]})},$i=Fi;function Hi(e){const{t}=Z();return a.jsxs("div",{children:[a.jsx(_t,{border:!0,children:t("settings.appearance.title")}),a.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-6 max-w-[700px]",children:zi.map(n=>a.jsx($i,{selector:n.selector,active:e.active===n.id,inUse:e.inUse===n.id,name:t(n.key),onClick:()=>e.setTheme(n.id)},n.id))})]})}function Ki(){const{t:e}=Z(),t=Cr();return a.jsx("div",{children:a.jsxs(_n,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[a.jsxs("div",{children:[a.jsx(Mn,{children:e("settings.account.admin.title")}),a.jsx("p",{className:"text-type-text",children:e("settings.account.admin.text")})]}),a.jsx("div",{className:"flex justify-end items-center",children:a.jsx(Le,{theme:"purple",onClick:()=>t("/admin"),children:e("settings.account.admin.button")})})]})})}function Xi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const ln=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Pn(e){return"nodeType"in e}function me(e){var t,n;return e?mt(e)?e:Pn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Bn(e){const{Document:t}=me(e);return e instanceof t}function Pt(e){return mt(e)?!1:e instanceof me(e).HTMLElement}function Mr(e){return e instanceof me(e).SVGElement}function bt(e){return e?mt(e)?e.document:Pn(e)?Bn(e)?e:Pt(e)||Mr(e)?e.ownerDocument:document:document:document}const ke=ln?f.useLayoutEffect:f.useEffect;function Un(e){const t=f.useRef(e);return ke(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function Gi(){const e=f.useRef(null),t=f.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function It(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return ke(()=>{n.current!==e&&(n.current=e)},t),n}function Bt(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function rn(e){const t=Un(e),n=f.useRef(null),r=f.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function An(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let xn={};function Ut(e,t){return f.useMemo(()=>{if(t)return t;const n=xn[e]==null?0:xn[e]+1;return xn[e]=n,e+"-"+n},[e,t])}function Lr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const d=Object.entries(l);for(const[u,g]of d){const m=o[u];m!=null&&(o[u]=m+e*g)}return o},{...t})}}const pt=Lr(1),Ot=Lr(-1);function Wi(e){return"clientX"in e&&"clientY"in e}function zn(e){if(!e)return!1;const{KeyboardEvent:t}=me(e.target);return t&&e instanceof t}function Yi(e){if(!e)return!1;const{TouchEvent:t}=me(e.target);return t&&e instanceof t}function En(e){if(Yi(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Wi(e)?{x:e.clientX,y:e.clientY}:null}const Mt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Mt.Translate.toString(e),Mt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),lr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function qi(e){return e.matches(lr)?e:e.querySelector(lr)}const Vi={display:"none"};function Ji(e){let{id:t,value:n}=e;return pe.createElement("div",{id:t,style:Vi},n)}function Qi(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return pe.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Zi(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const kr=f.createContext(null);function ea(e){const t=f.useContext(kr);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ta(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var d;return(d=l[i])==null?void 0:d.call(l,o)})},[e]),t]}const na={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ra={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function sa(e){let{announcements:t=ra,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=na}=e;const{announce:o,announcement:l}=Zi(),d=Ut("DndLiveRegion"),[u,g]=f.useState(!1);if(f.useEffect(()=>{g(!0)},[]),ea(f.useMemo(()=>({onDragStart(h){let{active:x}=h;o(t.onDragStart({active:x}))},onDragMove(h){let{active:x,over:b}=h;t.onDragMove&&o(t.onDragMove({active:x,over:b}))},onDragOver(h){let{active:x,over:b}=h;o(t.onDragOver({active:x,over:b}))},onDragEnd(h){let{active:x,over:b}=h;o(t.onDragEnd({active:x,over:b}))},onDragCancel(h){let{active:x,over:b}=h;o(t.onDragCancel({active:x,over:b}))}}),[o,t])),!u)return null;const m=pe.createElement(pe.Fragment,null,pe.createElement(Ji,{id:r,value:i.draggable}),pe.createElement(Qi,{id:d,announcement:l}));return n?ht.createPortal(m,n):m}var q;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(q||(q={}));function sn(){}function yn(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ia(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const _e=Object.freeze({x:0,y:0});function _r(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function aa(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function dr(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function Br(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function ur(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const oa=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=ur(t,t.left,t.top),o=[];for(const l of r){const{id:d}=l,u=n.get(d);if(u){const g=_r(ur(u),i);o.push({id:d,data:{droppableContainer:l,value:g}})}}return o.sort(Pr)},ca=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=dr(t),o=[];for(const l of r){const{id:d}=l,u=n.get(d);if(u){const g=dr(u),m=i.reduce((x,b,E)=>x+_r(g[E],b),0),h=Number((m/4).toFixed(4));o.push({id:d,data:{droppableContainer:l,value:h}})}}return o.sort(Pr)};function la(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,d=o-n;if(r<i&&n<o){const u=t.width*t.height,g=e.width*e.height,m=l*d,h=m/(u+g-m);return Number(h.toFixed(4))}return 0}const da=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,d=n.get(l);if(d){const u=la(d,t);u>0&&i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(aa)};function ua(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Ur(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:_e}function fa(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,d)=>({...l,top:l.top+e*d.y,bottom:l.bottom+e*d.y,left:l.left+e*d.x,right:l.right+e*d.x}),{...n})}}const ga=fa(1);function ha(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function pa(e,t,n){const r=ha(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:d}=r,u=e.left-l-(1-i)*parseFloat(n),g=e.top-d-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),m=i?e.width/i:e.width,h=o?e.height/o:e.height;return{width:m,height:h,top:g,right:u+m,bottom:g+h,left:u}}const ma={ignoreTransform:!1};function vt(e,t){t===void 0&&(t=ma);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:g,transformOrigin:m}=me(e).getComputedStyle(e);g&&(n=pa(n,g,m))}const{top:r,left:i,width:o,height:l,bottom:d,right:u}=n;return{top:r,left:i,width:o,height:l,bottom:d,right:u}}function fr(e){return vt(e,{ignoreTransform:!0})}function ba(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function va(e,t){return t===void 0&&(t=me(e).getComputedStyle(e)),t.position==="fixed"}function xa(e,t){t===void 0&&(t=me(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function dn(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Bn(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Pt(i)||Mr(i)||n.includes(i))return n;const o=me(e).getComputedStyle(i);return i!==e&&xa(i,o)&&n.push(i),va(i,o)?n:r(i.parentNode)}return e?r(e):n}function zr(e){const[t]=dn(e,1);return t??null}function wn(e){return!ln||!e?null:mt(e)?e:Pn(e)?Bn(e)||e===bt(e).scrollingElement?window:Pt(e)?e:null:null}function Fr(e){return mt(e)?e.scrollX:e.scrollLeft}function $r(e){return mt(e)?e.scrollY:e.scrollTop}function Tn(e){return{x:Fr(e),y:$r(e)}}var Q;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Q||(Q={}));function Hr(e){return!ln||!e?!1:e===document.scrollingElement}function Kr(e){const t={x:0,y:0},n=Hr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,d=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:d,maxScroll:r,minScroll:t}}const ya={x:.2,y:.2};function wa(e,t,n,r,i){let{top:o,left:l,right:d,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=ya);const{isTop:g,isBottom:m,isLeft:h,isRight:x}=Kr(e),b={x:0,y:0},E={x:0,y:0},C={height:t.height*i.y,width:t.width*i.x};return!g&&o<=t.top+C.height?(b.y=Q.Backward,E.y=r*Math.abs((t.top+C.height-o)/C.height)):!m&&u>=t.bottom-C.height&&(b.y=Q.Forward,E.y=r*Math.abs((t.bottom-C.height-u)/C.height)),!x&&d>=t.right-C.width?(b.x=Q.Forward,E.x=r*Math.abs((t.right-C.width-d)/C.width)):!h&&l<=t.left+C.width&&(b.x=Q.Backward,E.x=r*Math.abs((t.left+C.width-l)/C.width)),{direction:b,speed:E}}function Ca(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Xr(e){return e.reduce((t,n)=>pt(t,Tn(n)),_e)}function ja(e){return e.reduce((t,n)=>t+Fr(n),0)}function Sa(e){return e.reduce((t,n)=>t+$r(n),0)}function Na(e,t){if(t===void 0&&(t=vt),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);zr(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Da=[["x",["left","right"],ja],["y",["top","bottom"],Sa]];class Fn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=dn(n),i=Xr(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,d]of Da)for(const u of l)Object.defineProperty(this,u,{get:()=>{const g=d(r),m=i[o]-g;return this.rect[u]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class At{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Aa(e){const{EventTarget:t}=me(e);return e instanceof t?e:bt(e)}function Cn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Ne;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ne||(Ne={}));function gr(e){e.preventDefault()}function Ea(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(L||(L={}));const Gr={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter]},Ta=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case L.Right:return{...n,x:n.x+25};case L.Left:return{...n,x:n.x-25};case L.Down:return{...n,y:n.y+25};case L.Up:return{...n,y:n.y-25}}};class $n{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new At(bt(n)),this.windowListeners=new At(me(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ne.Resize,this.handleCancel),this.windowListeners.add(Ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Na(r),n(_e)}handleKeyDown(t){if(zn(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Gr,coordinateGetter:l=Ta,scrollBehavior:d="smooth"}=i,{code:u}=t;if(o.end.includes(u)){this.handleEnd(t);return}if(o.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:g}=r.current,m=g?{x:g.left,y:g.top}:_e;this.referenceCoordinates||(this.referenceCoordinates=m);const h=l(t,{active:n,context:r.current,currentCoordinates:m});if(h){const x=Ot(h,m),b={x:0,y:0},{scrollableAncestors:E}=r.current;for(const C of E){const S=t.code,{isTop:D,isRight:N,isLeft:j,isBottom:T,maxScroll:I,minScroll:O}=Kr(C),A=Ca(C),M={x:Math.min(S===L.Right?A.right-A.width/2:A.right,Math.max(S===L.Right?A.left:A.left+A.width/2,h.x)),y:Math.min(S===L.Down?A.bottom-A.height/2:A.bottom,Math.max(S===L.Down?A.top:A.top+A.height/2,h.y))},B=S===L.Right&&!N||S===L.Left&&!j,v=S===L.Down&&!T||S===L.Up&&!D;if(B&&M.x!==h.x){const P=C.scrollLeft+x.x,K=S===L.Right&&P<=I.x||S===L.Left&&P>=O.x;if(K&&!x.y){C.scrollTo({left:P,behavior:d});return}K?b.x=C.scrollLeft-P:b.x=S===L.Right?C.scrollLeft-I.x:C.scrollLeft-O.x,b.x&&C.scrollBy({left:-b.x,behavior:d});break}else if(v&&M.y!==h.y){const P=C.scrollTop+x.y,K=S===L.Down&&P<=I.y||S===L.Up&&P>=O.y;if(K&&!x.x){C.scrollTo({top:P,behavior:d});return}K?b.y=C.scrollTop-P:b.y=S===L.Down?C.scrollTop-I.y:C.scrollTop-O.y,b.y&&C.scrollBy({top:-b.y,behavior:d});break}}this.handleMove(t,pt(Ot(h,this.referenceCoordinates),b))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$n.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Gr,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const d=o.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function hr(e){return!!(e&&"distance"in e)}function pr(e){return!!(e&&"delay"in e)}class Hn{constructor(t,n,r){var i;r===void 0&&(r=Aa(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=bt(l),this.documentListeners=new At(this.document),this.listeners=new At(r),this.windowListeners=new At(me(l)),this.initialCoordinates=(i=En(o))!=null?i:_e,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Ne.Resize,this.handleCancel),this.windowListeners.add(Ne.DragStart,gr),this.windowListeners.add(Ne.VisibilityChange,this.handleCancel),this.windowListeners.add(Ne.ContextMenu,gr),this.documentListeners.add(Ne.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pr(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(hr(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ne.Click,Ea,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ne.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:d}}=o;if(!i)return;const u=(n=En(t))!=null?n:_e,g=Ot(i,u);if(!r&&d){if(hr(d)){if(d.tolerance!=null&&Cn(g,d.tolerance))return this.handleCancel();if(Cn(g,d.distance))return this.handleStart()}return pr(d)&&Cn(g,d.tolerance)?this.handleCancel():void 0}t.cancelable&&t.preventDefault(),l(u)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ra={move:{name:"pointermove"},end:{name:"pointerup"}};class Wr extends Hn{constructor(t){const{event:n}=t,r=bt(n.target);super(t,Ra,r)}}Wr.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Ia={move:{name:"mousemove"},end:{name:"mouseup"}};var Rn;(function(e){e[e.RightClick=2]="RightClick"})(Rn||(Rn={}));class Yr extends Hn{constructor(t){super(t,Ia,bt(t.event.target))}}Yr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Rn.RightClick?!1:(r==null||r({event:n}),!0)}}];const jn={move:{name:"touchmove"},end:{name:"touchend"}};class qr extends Hn{constructor(t){super(t,jn)}static setup(){return window.addEventListener(jn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(jn.move.name,t)};function t(){}}}qr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Et;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Et||(Et={}));var an;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(an||(an={}));function Oa(e){let{acceleration:t,activator:n=Et.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:d=an.TreeOrder,pointerCoordinates:u,scrollableAncestors:g,scrollableAncestorRects:m,delta:h,threshold:x}=e;const b=La({delta:h,disabled:!o}),[E,C]=Gi(),S=f.useRef({x:0,y:0}),D=f.useRef({x:0,y:0}),N=f.useMemo(()=>{switch(n){case Et.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Et.DraggableRect:return i}},[n,i,u]),j=f.useRef(null),T=f.useCallback(()=>{const O=j.current;if(!O)return;const A=S.current.x*D.current.x,M=S.current.y*D.current.y;O.scrollBy(A,M)},[]),I=f.useMemo(()=>d===an.TreeOrder?[...g].reverse():g,[d,g]);f.useEffect(()=>{if(!o||!g.length||!N){C();return}for(const O of I){if((r==null?void 0:r(O))===!1)continue;const A=g.indexOf(O),M=m[A];if(!M)continue;const{direction:B,speed:v}=wa(O,M,N,t,x);for(const P of["x","y"])b[P][B[P]]||(v[P]=0,B[P]=0);if(v.x>0||v.y>0){C(),j.current=O,E(T,l),S.current=v,D.current=B;return}}S.current={x:0,y:0},D.current={x:0,y:0},C()},[t,T,r,C,o,l,JSON.stringify(N),JSON.stringify(b),E,g,I,m,JSON.stringify(x)])}const Ma={x:{[Q.Backward]:!1,[Q.Forward]:!1},y:{[Q.Backward]:!1,[Q.Forward]:!1}};function La(e){let{delta:t,disabled:n}=e;const r=An(t);return Bt(i=>{if(n||!r||!i)return Ma;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Q.Backward]:i.x[Q.Backward]||o.x===-1,[Q.Forward]:i.x[Q.Forward]||o.x===1},y:{[Q.Backward]:i.y[Q.Backward]||o.y===-1,[Q.Forward]:i.y[Q.Forward]||o.y===1}}},[n,t,r])}function ka(e,t){const n=t!==null?e.get(t):void 0,r=n?n.node.current:null;return Bt(i=>{var o;return t===null?null:(o=r??i)!=null?o:null},[r,t])}function _a(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var Lt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Lt||(Lt={}));var In;(function(e){e.Optimized="optimized"})(In||(In={}));const mr=new Map;function Pa(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=f.useState(null),{frequency:d,measure:u,strategy:g}=i,m=f.useRef(e),h=S(),x=It(h),b=f.useCallback(function(D){D===void 0&&(D=[]),!x.current&&l(N=>N===null?D:N.concat(D.filter(j=>!N.includes(j))))},[x]),E=f.useRef(null),C=Bt(D=>{if(h&&!n)return mr;if(!D||D===mr||m.current!==e||o!=null){const N=new Map;for(let j of e){if(!j)continue;if(o&&o.length>0&&!o.includes(j.id)&&j.rect.current){N.set(j.id,j.rect.current);continue}const T=j.node.current,I=T?new Fn(u(T),T):null;j.rect.current=I,I&&N.set(j.id,I)}return N}return D},[e,o,n,h,u]);return f.useEffect(()=>{m.current=e},[e]),f.useEffect(()=>{h||b()},[n,h]),f.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),f.useEffect(()=>{h||typeof d!="number"||E.current!==null||(E.current=setTimeout(()=>{b(),E.current=null},d))},[d,h,b,...r]),{droppableRects:C,measureDroppableContainers:b,measuringScheduled:o!=null};function S(){switch(g){case Lt.Always:return!1;case Lt.BeforeDragging:return n;default:return!n}}}function Vr(e,t){return Bt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ba(e,t){return Vr(e,t)}function Ua(e){let{callback:t,disabled:n}=e;const r=Un(t),i=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return f.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function un(e){let{callback:t,disabled:n}=e;const r=Un(t),i=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return f.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function za(e){return new Fn(vt(e),e)}function br(e,t,n){t===void 0&&(t=za);const[r,i]=f.useReducer(d,null),o=Ua({callback(u){if(e)for(const g of u){const{type:m,target:h}=g;if(m==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=un({callback:i});return ke(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),r;function d(u){if(!e)return null;if(e.isConnected===!1){var g;return(g=u??n)!=null?g:null}const m=t(e);return JSON.stringify(u)===JSON.stringify(m)?u:m}}function Fa(e){const t=Vr(e);return Ur(e,t)}const vr=[];function $a(e){const t=f.useRef(e),n=Bt(r=>e?r&&r!==vr&&e&&t.current&&e.parentNode===t.current.parentNode?r:dn(e):vr,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function Ha(e){const[t,n]=f.useState(null),r=f.useRef(e),i=f.useCallback(o=>{const l=wn(o.target);l&&n(d=>d?(d.set(l,Tn(l)),new Map(d)):null)},[]);return f.useEffect(()=>{const o=r.current;if(e!==o){l(o);const d=e.map(u=>{const g=wn(u);return g?(g.addEventListener("scroll",i,{passive:!0}),[g,Tn(g)]):null}).filter(u=>u!=null);n(d.length?new Map(d):null),r.current=e}return()=>{l(e),l(o)};function l(d){d.forEach(u=>{const g=wn(u);g==null||g.removeEventListener("scroll",i)})}},[i,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>pt(o,l),_e):Xr(e):_e,[e,t])}function xr(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==_e;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Ot(e,n.current):_e}function Ka(e){f.useEffect(()=>{if(!ln)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Xa(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function Jr(e){return f.useMemo(()=>e?ba(e):null,[e])}const Sn=[];function Ga(e,t){t===void 0&&(t=vt);const[n]=e,r=Jr(n?me(n):null),[i,o]=f.useReducer(d,Sn),l=un({callback:o});return e.length>0&&i===Sn&&o(),ke(()=>{e.length?e.forEach(u=>l==null?void 0:l.observe(u)):(l==null||l.disconnect(),o())},[e]),i;function d(){return e.length?e.map(u=>Hr(u)?r:new Fn(t(u),u)):Sn}}function Wa(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pt(t)?t:e}function Ya(e){let{measure:t}=e;const[n,r]=f.useState(null),i=f.useCallback(g=>{for(const{target:m}of g)if(Pt(m)){r(h=>{const x=t(m);return h?{...h,width:x.width,height:x.height}:x});break}},[t]),o=un({callback:i}),l=f.useCallback(g=>{const m=Wa(g);o==null||o.disconnect(),m&&(o==null||o.observe(m)),r(m?t(m):null)},[t,o]),[d,u]=rn(l);return f.useMemo(()=>({nodeRef:d,rect:n,setRef:u}),[n,d,u])}const qa=[{sensor:Wr,options:{}},{sensor:$n,options:{}}],Va={current:{}},en={draggable:{measure:fr},droppable:{measure:fr,strategy:Lt.WhileDragging,frequency:In.Optimized},dragOverlay:{measure:vt}};class Tt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ja={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:en,measureDroppableContainers:sn,windowRect:null,measuringScheduled:!1},Qa={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sn,draggableNodes:new Map,over:null,measureDroppableContainers:sn},fn=f.createContext(Qa),Qr=f.createContext(Ja);function Za(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tt}}}function eo(e,t){switch(t.type){case q.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case q.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case q.DragEnd:case q.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case q.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Tt(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case q.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new Tt(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case q.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new Tt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function to(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=f.useContext(fn),o=An(r),l=An(n==null?void 0:n.id);return f.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!zn(o)||document.activeElement===o.target)return;const d=i.get(l);if(!d)return;const{activatorNode:u,node:g}=d;if(!u.current&&!g.current)return;requestAnimationFrame(()=>{for(const m of[u.current,g.current]){if(!m)continue;const h=qi(m);if(h){h.focus();break}}})}},[r,t,i,l,o]),null}function no(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function ro(e){return f.useMemo(()=>({draggable:{...en.draggable,...e==null?void 0:e.draggable},droppable:{...en.droppable,...e==null?void 0:e.droppable},dragOverlay:{...en.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function so(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=f.useRef(!1),{x:l,y:d}=typeof i=="boolean"?{x:i,y:i}:i;ke(()=>{if(!l&&!d||!t){o.current=!1;return}if(o.current||!r)return;const g=t==null?void 0:t.node.current;if(!g||g.isConnected===!1)return;const m=n(g),h=Ur(m,r);if(l||(h.x=0),d||(h.y=0),o.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const x=zr(g);x&&x.scrollBy({top:h.y,left:h.x})}},[t,l,d,r,n])}const Zr=f.createContext({..._e,scaleX:1,scaleY:1});var et;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(et||(et={}));const io=f.memo(function(t){var n,r,i,o;let{id:l,accessibility:d,autoScroll:u=!0,children:g,sensors:m=qa,collisionDetection:h=da,measuring:x,modifiers:b,...E}=t;const C=f.useReducer(eo,void 0,Za),[S,D]=C,[N,j]=ta(),[T,I]=f.useState(et.Uninitialized),O=T===et.Initialized,{draggable:{active:A,nodes:M,translate:B},droppable:{containers:v}}=S,P=A?M.get(A):null,K=f.useRef({initial:null,translated:null}),ee=f.useMemo(()=>{var Y;return A!=null?{id:A,data:(Y=P==null?void 0:P.data)!=null?Y:Va,rect:K}:null},[A,P]),y=f.useRef(null),[F,U]=f.useState(null),[W,Pe]=f.useState(null),X=It(E,Object.values(E)),$e=Ut("DndDescribedBy",l),qe=f.useMemo(()=>v.getEnabled(),[v]),V=ro(x),{droppableRects:de,measureDroppableContainers:Ae,measuringScheduled:k}=Pa(qe,{dragging:O,dependencies:[B.x,B.y],config:V.droppable}),te=ka(M,A),He=f.useMemo(()=>W?En(W):null,[W]),G=Kt(),ue=Ba(te,V.draggable.measure);so({activeNode:A?M.get(A):null,config:G.layoutShiftCompensation,initialRect:ue,measure:V.draggable.measure});const _=br(te,V.draggable.measure,ue),Ee=br(te?te.parentElement:null),se=f.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:v,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=v.getNodeFor((n=se.current.over)==null?void 0:n.id),fe=Ya({measure:V.dragOverlay.measure}),Re=(r=fe.nodeRef.current)!=null?r:te,Be=O?(i=fe.rect)!=null?i:_:null,xt=!!(fe.nodeRef.current&&fe.rect),ot=Fa(xt?null:_),yt=Jr(Re?me(Re):null),Ue=$a(O?Te??te:null),ct=Ga(Ue),lt=no(b,{transform:{x:B.x-ot.x,y:B.y-ot.y,scaleX:1,scaleY:1},activatorEvent:W,active:ee,activeNodeRect:_,containerNodeRect:Ee,draggingNodeRect:Be,over:se.current.over,overlayNodeRect:fe.rect,scrollableAncestors:Ue,scrollableAncestorRects:ct,windowRect:yt}),zt=He?pt(He,B):null,Ft=Ha(Ue),gn=xr(Ft),hn=xr(Ft,[_]),Ie=pt(lt,gn),ze=Be?ga(Be,lt):null,Ve=ee&&ze?h({active:ee,collisionRect:ze,droppableRects:de,droppableContainers:qe,pointerCoordinates:zt}):null,be=Br(Ve,"id"),[Oe,wt]=f.useState(null),pn=xt?lt:pt(lt,hn),$t=ua(pn,(o=Oe==null?void 0:Oe.rect)!=null?o:null,_),tt=f.useCallback((Y,oe)=>{let{sensor:ne,options:ge}=oe;if(y.current==null)return;const ie=M.get(y.current);if(!ie)return;const ce=Y.nativeEvent,he=new ne({active:y.current,activeNode:ie,event:ce,options:ge,context:se,onStart(ve){const nt=y.current;if(nt==null)return;const rt=M.get(nt);if(!rt)return;const{onDragStart:dt}=X.current,ut={active:{id:nt,data:rt.data,rect:K}};ht.unstable_batchedUpdates(()=>{dt==null||dt(ut),I(et.Initializing),D({type:q.DragStart,initialCoordinates:ve,active:nt}),N({type:"onDragStart",event:ut})})},onMove(ve){D({type:q.DragMove,coordinates:ve})},onEnd:Ce(q.DragEnd),onCancel:Ce(q.DragCancel)});ht.unstable_batchedUpdates(()=>{U(he),Pe(Y.nativeEvent)});function Ce(ve){return async function(){const{active:rt,collisions:dt,over:ut,scrollAdjustedTranslate:jt}=se.current;let Xe=null;if(rt&&jt){const{cancelDrop:xe}=X.current;Xe={activatorEvent:ce,active:rt,collisions:dt,delta:jt,over:ut},ve===q.DragEnd&&typeof xe=="function"&&await Promise.resolve(xe(Xe))&&(ve=q.DragCancel)}y.current=null,ht.unstable_batchedUpdates(()=>{D({type:ve}),I(et.Uninitialized),wt(null),U(null),Pe(null);const xe=ve===q.DragEnd?"onDragEnd":"onDragCancel";if(Xe){const St=X.current[xe];St==null||St(Xe),N({type:xe,event:Xe})}})}}},[M]),Ht=f.useCallback((Y,oe)=>(ne,ge)=>{const ie=ne.nativeEvent,ce=M.get(ge);if(y.current!==null||!ce||ie.dndKit||ie.defaultPrevented)return;const he={active:ce};Y(ne,oe.options,he)===!0&&(ie.dndKit={capturedBy:oe.sensor},y.current=ge,tt(ne,oe))},[M,tt]),Ct=_a(m,Ht);Ka(m),ke(()=>{_&&T===et.Initializing&&I(et.Initialized)},[_,T]),f.useEffect(()=>{const{onDragMove:Y}=X.current,{active:oe,activatorEvent:ne,collisions:ge,over:ie}=se.current;if(!oe||!ne)return;const ce={active:oe,activatorEvent:ne,collisions:ge,delta:{x:Ie.x,y:Ie.y},over:ie};ht.unstable_batchedUpdates(()=>{Y==null||Y(ce),N({type:"onDragMove",event:ce})})},[Ie.x,Ie.y]),f.useEffect(()=>{const{active:Y,activatorEvent:oe,collisions:ne,droppableContainers:ge,scrollAdjustedTranslate:ie}=se.current;if(!Y||y.current==null||!oe||!ie)return;const{onDragOver:ce}=X.current,he=ge.get(be),Ce=he&&he.rect.current?{id:he.id,rect:he.rect.current,data:he.data,disabled:he.disabled}:null,ve={active:Y,activatorEvent:oe,collisions:ne,delta:{x:ie.x,y:ie.y},over:Ce};ht.unstable_batchedUpdates(()=>{wt(Ce),ce==null||ce(ve),N({type:"onDragOver",event:ve})})},[be]),ke(()=>{se.current={activatorEvent:W,active:ee,activeNode:te,collisionRect:ze,collisions:Ve,droppableRects:de,draggableNodes:M,draggingNode:Re,draggingNodeRect:Be,droppableContainers:v,over:Oe,scrollableAncestors:Ue,scrollAdjustedTranslate:Ie},K.current={initial:Be,translated:ze}},[ee,te,Ve,ze,M,Re,Be,de,v,Oe,Ue,Ie]),Oa({...G,delta:B,draggingRect:ze,pointerCoordinates:zt,scrollableAncestors:Ue,scrollableAncestorRects:ct});const mn=f.useMemo(()=>({active:ee,activeNode:te,activeNodeRect:_,activatorEvent:W,collisions:Ve,containerNodeRect:Ee,dragOverlay:fe,draggableNodes:M,droppableContainers:v,droppableRects:de,over:Oe,measureDroppableContainers:Ae,scrollableAncestors:Ue,scrollableAncestorRects:ct,measuringConfiguration:V,measuringScheduled:k,windowRect:yt}),[ee,te,_,W,Ve,Ee,fe,M,v,de,Oe,Ae,Ue,ct,V,k,yt]),Ke=f.useMemo(()=>({activatorEvent:W,activators:Ct,active:ee,activeNodeRect:_,ariaDescribedById:{draggable:$e},dispatch:D,draggableNodes:M,over:Oe,measureDroppableContainers:Ae}),[W,Ct,ee,_,D,$e,M,Oe,Ae]);return pe.createElement(kr.Provider,{value:j},pe.createElement(fn.Provider,{value:Ke},pe.createElement(Qr.Provider,{value:mn},pe.createElement(Zr.Provider,{value:$t},g)),pe.createElement(to,{disabled:(d==null?void 0:d.restoreFocus)===!1})),pe.createElement(sa,{...d,hiddenTextDescribedById:$e}));function Kt(){const Y=(F==null?void 0:F.autoScrollEnabled)===!1,oe=typeof u=="object"?u.enabled===!1:u===!1,ne=O&&!Y&&!oe;return typeof u=="object"?{...u,enabled:ne}:{enabled:ne}}}),ao=f.createContext(null),yr="button",oo="Droppable";function co(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=Ut(oo),{activators:l,activatorEvent:d,active:u,activeNodeRect:g,ariaDescribedById:m,draggableNodes:h,over:x}=f.useContext(fn),{role:b=yr,roleDescription:E="draggable",tabIndex:C=0}=i??{},S=(u==null?void 0:u.id)===t,D=f.useContext(S?Zr:ao),[N,j]=rn(),[T,I]=rn(),O=Xa(l,t),A=It(n);ke(()=>(h.set(t,{id:t,key:o,node:N,activatorNode:T,data:A}),()=>{const B=h.get(t);B&&B.key===o&&h.delete(t)}),[h,t]);const M=f.useMemo(()=>({role:b,tabIndex:C,"aria-disabled":r,"aria-pressed":S&&b===yr?!0:void 0,"aria-roledescription":E,"aria-describedby":m.draggable}),[r,b,C,S,E,m.draggable]);return{active:u,activatorEvent:d,activeNodeRect:g,attributes:M,isDragging:S,listeners:r?void 0:O,node:N,over:x,setNodeRef:j,setActivatorNodeRef:I,transform:D}}function lo(){return f.useContext(Qr)}const uo="Droppable",fo={timeout:25};function go(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=Ut(uo),{active:l,dispatch:d,over:u,measureDroppableContainers:g}=f.useContext(fn),m=f.useRef({disabled:n}),h=f.useRef(!1),x=f.useRef(null),b=f.useRef(null),{disabled:E,updateMeasurementsFor:C,timeout:S}={...fo,...i},D=It(C??r),N=f.useCallback(()=>{if(!h.current){h.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{g(Array.isArray(D.current)?D.current:[D.current]),b.current=null},S)},[S]),j=un({callback:N,disabled:E||!l}),T=f.useCallback((M,B)=>{j&&(B&&(j.unobserve(B),h.current=!1),M&&j.observe(M))},[j]),[I,O]=rn(T),A=It(t);return f.useEffect(()=>{!j||!I.current||(j.disconnect(),h.current=!1,j.observe(I.current))},[I,j]),ke(()=>(d({type:q.RegisterDroppable,element:{id:r,key:o,disabled:n,node:I,rect:x,data:A}}),()=>d({type:q.UnregisterDroppable,key:o,id:r})),[r]),f.useEffect(()=>{n!==m.current.disabled&&(d({type:q.SetDroppableDisabled,id:r,key:o,disabled:n}),m.current.disabled=n)},[r,o,n,d]),{active:l,rect:x,isOver:(u==null?void 0:u.id)===r,node:I,over:u,setNodeRef:O}}function ho(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const po=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return!n||!t?r:ho(r,n,t)},mo=e=>{let{transform:t}=e;return{...t,x:0}};function Kn(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function bo(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Qt(e){return e!==null&&e>=0}function vo(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function xo(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const es=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=Kn(t,r,n),l=t[i],d=o[i];return!d||!l?null:{x:d.left-l.left,y:d.top-l.top,scaleX:d.width/l.width,scaleY:d.height/l.height}},Zt={scaleX:1,scaleY:1},yo=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const d=(t=o[n])!=null?t:r;if(!d)return null;if(i===n){const g=o[l];return g?{x:0,y:n<l?g.top+g.height-(d.top+d.height):g.top-d.top,...Zt}:null}const u=wo(o,i,n);return i>n&&i<=l?{x:0,y:-d.height-u,...Zt}:i<n&&i>=l?{x:0,y:d.height+u,...Zt}:{x:0,y:0,...Zt}};function wo(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const ts="Sortable",ns=pe.createContext({activeIndex:-1,containerId:ts,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:es,disabled:{draggable:!1,droppable:!1}});function Co(e){let{children:t,id:n,items:r,strategy:i=es,disabled:o=!1}=e;const{active:l,dragOverlay:d,droppableRects:u,over:g,measureDroppableContainers:m}=lo(),h=Ut(ts,n),x=d.rect!==null,b=f.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),E=l!=null,C=l?b.indexOf(l.id):-1,S=g?b.indexOf(g.id):-1,D=f.useRef(b),N=!vo(b,D.current),j=S!==-1&&C===-1||N,T=xo(o);ke(()=>{N&&E&&m(b)},[N,b,E,m]),f.useEffect(()=>{D.current=b},[b]);const I=f.useMemo(()=>({activeIndex:C,containerId:h,disabled:T,disableTransforms:j,items:b,overIndex:S,useDragOverlay:x,sortedRects:bo(b,u),strategy:i}),[C,h,T.draggable,T.droppable,j,b,S,u,x,i]);return pe.createElement(ns.Provider,{value:I},t)}const jo=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Kn(n,r,i).indexOf(t)},So=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:d,previousContainerId:u,transition:g}=e;return!g||!r||d!==o&&i===l?!1:n?!0:l!==i&&t===u},No={duration:200,easing:"ease"},rs="transform",Do=Mt.Transition.toString({property:rs,duration:0,easing:"linear"}),Ao={roleDescription:"sortable"};function Eo(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=f.useState(null),d=f.useRef(n);return ke(()=>{if(!t&&n!==d.current&&r.current){const u=i.current;if(u){const g=vt(r.current,{ignoreTransform:!0}),m={x:u.left-g.left,y:u.top-g.top,scaleX:u.width/g.width,scaleY:u.height/g.height};(m.x||m.y)&&l(m)}}n!==d.current&&(d.current=n)},[t,n,r,i]),f.useEffect(()=>{o&&l(null)},[o]),o}function To(e){let{animateLayoutChanges:t=So,attributes:n,disabled:r,data:i,getNewIndex:o=jo,id:l,strategy:d,resizeObserverConfig:u,transition:g=No}=e;const{items:m,containerId:h,activeIndex:x,disabled:b,disableTransforms:E,sortedRects:C,overIndex:S,useDragOverlay:D,strategy:N}=f.useContext(ns),j=Ro(r,b),T=m.indexOf(l),I=f.useMemo(()=>({sortable:{containerId:h,index:T,items:m},...i}),[h,i,T,m]),O=f.useMemo(()=>m.slice(m.indexOf(l)),[m,l]),{rect:A,node:M,isOver:B,setNodeRef:v}=go({id:l,data:I,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:P,activatorEvent:K,activeNodeRect:ee,attributes:y,setNodeRef:F,listeners:U,isDragging:W,over:Pe,setActivatorNodeRef:X,transform:$e}=co({id:l,data:I,attributes:{...Ao,...n},disabled:j.draggable}),qe=Xi(v,F),V=!!P,de=V&&!E&&Qt(x)&&Qt(S),Ae=!D&&W,k=Ae&&de?$e:null,He=de?k??(d??N)({rects:C,activeNodeRect:ee,activeIndex:x,overIndex:S,index:T}):null,G=Qt(x)&&Qt(S)?o({id:l,items:m,activeIndex:x,overIndex:S}):T,ue=P==null?void 0:P.id,_=f.useRef({activeId:ue,items:m,newIndex:G,containerId:h}),Ee=m!==_.current.items,se=t({active:P,containerId:h,isDragging:W,isSorting:V,id:l,index:T,items:m,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:g,wasDragging:_.current.activeId!=null}),Te=Eo({disabled:!se,index:T,node:M,rect:A});return f.useEffect(()=>{V&&_.current.newIndex!==G&&(_.current.newIndex=G),h!==_.current.containerId&&(_.current.containerId=h),m!==_.current.items&&(_.current.items=m)},[V,G,h,m]),f.useEffect(()=>{if(ue===_.current.activeId)return;if(ue&&!_.current.activeId){_.current.activeId=ue;return}const Re=setTimeout(()=>{_.current.activeId=ue},50);return()=>clearTimeout(Re)},[ue]),{active:P,activeIndex:x,attributes:y,data:I,rect:A,index:T,newIndex:G,items:m,isOver:B,isSorting:V,isDragging:W,listeners:U,node:M,overIndex:S,over:Pe,setNodeRef:qe,setActivatorNodeRef:X,setDroppableNodeRef:v,setDraggableNodeRef:F,transform:Te??He,transition:fe()};function fe(){if(Te||Ee&&_.current.newIndex===T)return Do;if(!(Ae&&!zn(K)||!g)&&(V||se))return Mt.Transition.toString({...g,property:rs})}}function Ro(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function on(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Io=[L.Down,L.Right,L.Up,L.Left],Oo=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:l,scrollableAncestors:d}}=t;if(Io.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];o.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const x=i.get(h.id);if(x)switch(e.code){case L.Down:r.top<x.top&&u.push(h);break;case L.Up:r.top>x.top&&u.push(h);break;case L.Left:r.left>x.left&&u.push(h);break;case L.Right:r.left<x.left&&u.push(h);break}});const g=ca({collisionRect:r,droppableRects:i,droppableContainers:u});let m=Br(g,"id");if(m===(l==null?void 0:l.id)&&g.length>1&&(m=g[1].id),m!=null){const h=o.get(n.id),x=o.get(m),b=x?i.get(x.id):null,E=x==null?void 0:x.node.current;if(E&&b&&h&&x){const S=dn(E).some((O,A)=>d[A]!==O),D=ss(h,x),N=Mo(h,x),j=S||!D?{x:0,y:0}:{x:N?r.width-b.width:0,y:N?r.height-b.height:0},T={x:b.left,y:b.top};return j.x&&j.y?T:Ot(T,j)}}}};function ss(e,t){return!on(e)||!on(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Mo(e,t){return!on(e)||!on(t)||!ss(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function Lo(e){const{attributes:t,listeners:n,setNodeRef:r,transform:i,transition:o}=To({id:e.item.id}),l={transform:Mt.Transform.toString(i),transition:o};return a.jsxs("div",{ref:r,style:l,...t,...n,className:De("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg touch-manipulation",e.item.disabled&&"opacity-50",i?"cursor-grabbing":"cursor-grab"),children:[a.jsx("span",{className:"flex-1 text-white font-bold",children:e.item.name}),e.item.disabled&&a.jsx(Ye,{icon:le.WARNING}),a.jsx(Ye,{icon:le.MENU})]})}function ko(e){const t=ia(yn(qr,{activationConstraint:{delay:75,tolerance:1}}),yn(Yr),yn($n,{coordinateGetter:Oo})),n=r=>{const{active:i,over:o}=r;if(o&&i.id!==o.id){const l=e.items,d=l.findIndex(m=>m.id===i.id),u=l.findIndex(m=>m.id===o.id),g=Kn(l,d,u);e.setItems(g)}};return a.jsx(io,{sensors:t,collisionDetection:oa,onDragEnd:n,modifiers:[mo,po],children:a.jsx(Co,{items:e.items,strategy:yo,children:a.jsx("div",{className:"flex flex-col gap-2",children:e.items.map(r=>a.jsx(Lo,{item:r},r.id))})})})}function _o(e){const{t}=Z(),n=ci(rr.map(u=>u.code)),r=li(),i=rr.sort((u,g)=>n.indexOf(u.code)-n.indexOf(g.code)).map(u=>({id:u.code,name:`${u.name}${u.nativeName?` — ${u.nativeName}`:""}`,leftIcon:a.jsx(di,{langCode:u.code})})),o=i.find(u=>{var g;return u.id===((g=ui(e.language))==null?void 0:g.code)}),l=Or().listSources(),d=f.useMemo(()=>{const u=fi().listSources();return e.sourceOrder.map(g=>{var m;return{id:g,name:((m=l.find(h=>h.id===g))==null?void 0:m.name)||g,disabled:!u.find(h=>h.id===g)}})},[e.sourceOrder,l]);return a.jsxs("div",{className:"space-y-12",children:[a.jsx(_t,{border:!0,children:t("settings.preferences.title")}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.language")}),a.jsx("p",{className:"max-w-[20rem] font-medium",children:t("settings.preferences.languageDescription")}),a.jsx(gi,{options:i,selectedItem:o||i[0],setSelectedItem:u=>e.setLanguage(u.id)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.thumbnail")}),a.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.thumbnailDescription")}),a.jsxs("div",{onClick:()=>e.setEnableThumbnails(!e.enableThumbnails),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[a.jsx(Rt,{enabled:e.enableThumbnails}),a.jsx("p",{className:"flex-1 text-white font-bold",children:t("settings.preferences.thumbnailLabel")})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-bold mb-3",children:t("settings.preferences.autoplay")}),a.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.autoplayDescription")}),a.jsxs("div",{onClick:()=>r?e.setEnableAutoplay(!e.enableAutoplay):null,className:De("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",r?"cursor-pointer opacity-100 pointer-events-auto":"cursor-not-allowed opacity-50 pointer-events-none"),children:[a.jsx(Rt,{enabled:e.enableAutoplay&&r}),a.jsx("p",{className:"flex-1 text-white font-bold",children:t("settings.preferences.autoplayLabel")})]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("p",{className:"text-white font-bold",children:t("settings.preferences.sourceOrder")}),a.jsx("p",{className:"max-w-[25rem] font-medium",children:t("settings.preferences.sourceOrderDescription")}),a.jsx(ko,{items:d,setItems:u=>e.setSourceOrder(u.map(g=>g.id))}),a.jsx(Le,{className:"max-w-[25rem]",theme:"secondary",onClick:()=>e.setSourceOrder(l.map(u=>u.id)),children:t("settings.reset")})]})]})}function Po(e){const{isMobile:t}=Ir();return a.jsx(wi,{ultraWide:!0,classNames:"overflow-visible",children:a.jsxs("div",{className:De("grid gap-12",t?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[a.jsx(Ui,{}),a.jsx("div",{children:e.children})]})})}function Bo(e){const t=kt(),{account:n}=e,[r,i]=On(()=>t?hi(t,n):Promise.resolve([]),[n,t]);return f.useEffect(()=>{i()},[i]),a.jsxs(a.Fragment,{children:[a.jsx(Ai,{deviceName:e.deviceName,setDeviceName:e.setDeviceName,colorA:e.colorA,setColorA:e.setColorA,colorB:e.colorB,setColorB:e.setColorB,userIcon:e.userIcon,setUserIcon:e.setUserIcon}),a.jsx(Li,{error:!!r.error,loading:r.loading,sessions:r.value??[],onChange:i}),a.jsx(Ni,{})]})}function Fo(){const{t:e}=Z(),t=sr(y=>y.theme),n=sr(y=>y.setTheme),r=Nn(y=>y.previewTheme),i=Nn(y=>y.setPreviewTheme),o=ir(y=>y.language),l=ir(y=>y.setLanguage),d=ar(y=>y.styling),u=ar(y=>y.updateStyling),g=we(y=>y.proxySet),m=we(y=>y.setProxySet),h=we(y=>y.backendUrl),x=we(y=>y.setBackendUrl),b=gt(y=>y.enableThumbnails),E=gt(y=>y.setEnableThumbnails),C=gt(y=>y.enableAutoplay),S=gt(y=>y.setEnableAutoplay),D=gt(y=>y.sourceOrder),N=gt(y=>y.setSourceOrder),j=we(y=>y.account),T=we(y=>y.setAccountProfile),I=we(y=>y.updateDeviceName),O=f.useMemo(()=>j?Rr(j.deviceName,Dn(j.seed)):"",[j]),A=kt(),{logout:M}=Ar(),B=we(),v=Si(t,o,d,O,g,h,j==null?void 0:j.profile,b,C,D),P=f.useMemo(()=>{const y=Or().listSources(),F=y.map(X=>X.id),U=v.sourceOrder.state,W=U.filter(X=>F.includes(X)),Pe=y.filter(X=>!U.includes(X.id)).map(X=>X.id);return[...W,...Pe]},[v.sourceOrder.state]);f.useEffect(()=>{i(t??"default")},[i,t]),f.useEffect(()=>()=>{i(null)},[i]);const K=f.useCallback(y=>{v.theme.set(y==="default"?null:y),i(y)},[v.theme,i]),ee=f.useCallback(async()=>{var y,F;if(j&&A){if((v.appLanguage.changed||v.theme.changed||v.proxyUrls.changed)&&await pi(A,j,{applicationLanguage:v.appLanguage.state,applicationTheme:v.theme.state,proxyUrls:((y=v.proxyUrls.state)==null?void 0:y.filter(U=>U!==""))??null}),v.deviceName.changed){const U=await mi(v.deviceName.state,Dn(j.seed));await bi(A,j,{deviceName:U}),I(U)}v.profile.changed&&await vi(A,j,{profile:v.profile.state})}if(E(v.enableThumbnails.state),S(v.enableAutoplay.state),N(v.sourceOrder.state),l(v.appLanguage.state),n(v.theme.state),u(v.subtitleStyling.state),m(((F=v.proxyUrls.state)==null?void 0:F.filter(U=>U!==""))??null),v.profile.state&&T(v.profile.state),v.backendUrl.changed){await M();let U=v.backendUrl.state;U&&!U.startsWith("http://")&&!U.startsWith("https://")&&(U=`https://${U}`),x(U)}},[j,A,E,v,S,N,l,n,u,m,I,T,M,x]);return a.jsxs(xi,{children:[a.jsx(yi,{subpage:!0,k:"global.pages.settings"}),a.jsxs(Po,{children:[a.jsxs("div",{id:"settings-account",children:[a.jsx(_t,{border:!0,className:"!mb-0",children:e("settings.account.title")}),B.account&&v.profile.state?a.jsx(Bo,{account:B.account,deviceName:v.deviceName.state,setDeviceName:v.deviceName.set,colorA:v.profile.state.colorA,setColorA:y=>{v.profile.set(F=>F?{...F,colorA:y}:void 0)},colorB:v.profile.state.colorB,setColorB:y=>v.profile.set(F=>F?{...F,colorB:y}:void 0),userIcon:v.profile.state.icon,setUserIcon:y=>v.profile.set(F=>F?{...F,icon:y}:void 0)}):a.jsx(ki,{})]}),a.jsx("div",{className:"mt-10",children:a.jsx(Ki,{})}),a.jsx("div",{id:"settings-preferences",className:"mt-48",children:a.jsx(_o,{language:v.appLanguage.state,setLanguage:v.appLanguage.set,enableThumbnails:v.enableThumbnails.state,setEnableThumbnails:v.enableThumbnails.set,enableAutoplay:v.enableAutoplay.state,setEnableAutoplay:v.enableAutoplay.set,sourceOrder:P,setSourceOrder:v.sourceOrder.set})}),a.jsx("div",{id:"settings-appearance",className:"mt-48",children:a.jsx(Hi,{active:r??"default",inUse:t??"default",setTheme:K})}),a.jsx("div",{id:"settings-captions",className:"mt-48",children:a.jsx(Ei,{styling:v.subtitleStyling.state,setStyling:v.subtitleStyling.set})}),a.jsx("div",{id:"settings-connection",className:"mt-48",children:a.jsx(Ii,{backendUrl:v.backendUrl.state,setBackendUrl:v.backendUrl.set,proxyUrls:v.proxyUrls.state,setProxyUrls:v.proxyUrls.set})})]}),a.jsxs(Er,{animation:"fade",show:v.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3",children:[a.jsx("p",{className:"text-type-danger",children:e("settings.unsaved")}),a.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[a.jsx(Le,{className:"w-full md:w-auto",theme:"secondary",onClick:v.reset,children:e("settings.reset")}),a.jsx(Le,{className:"w-full md:w-auto",theme:"purple",onClick:ee,children:e("settings.save")})]})]})]})}export{Bo as AccountSettings,Fo as SettingsPage,Fo as default};
//# sourceMappingURL=Settings-jqFD2_GX.js.map
